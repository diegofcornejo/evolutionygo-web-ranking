---
import Rating from '../Rating.astro';

interface Props {
	userId: number;
	username: string;
	points: number;
	wins: number;
	losses: number;
	winRate: number;
	position: number;
}

const { userId, username, points, wins, losses, winRate, position } = Astro.props;
const image = `https://ui-avatars.com/api/?name=${username}&background=random&size=128`;
const rating = Math.floor(Math.random() * 5) + 1;

const officialBadges = [
	{
		icon: 'ğŸ†',
		label: 'TDC',
	},
	{
		icon: 'ğŸ¥ˆ',
		label: 'TCG',
	},
	{
		icon: 'ğŸŒŸ',
		label: 'MVP',
	},
	{
		icon: 'ğŸ”¥',
		label: 'Hero',
	},
];
---

<a href={`/duelists/${userId}`} class='card bg-base-300 w-full shadow-xl cursor-pointer max-w-sm hover:bg-neutral transition-all duration-200 ease-in-out'>
	<div class='flex flex-col items-center gap-4'>
		<figure>
			<img
				src={image}
				alt={username}
				class='w-24 h-24 rounded-full mt-8'
				transition:name={`img-duelist-${userId}`}
				transition:animate='none'
			/>
		</figure>
		<Rating
			rating={rating}
			transition:name={`rating-duelist-${userId}`}
			transition:animate='none'
		/>
	</div>
	<div class='card-body text-center'>
		<h2
			class='font-bold text-2xl'
			transition:name={`title-duelist-${userId}`}
			transition:animate='none'
		>
		#{position} {username}
			<!-- <div class='badge badge-secondary'>{position}</div> -->
		</h2>
		<p class='text-sm font-bold'>Points: {points}</p>
		<p class='text-sm text-success'>Wins: {wins}</p>
		<p class='text-sm text-error'>Losses: {losses}</p>
		<p class='text-sm'>Win Rate: {winRate.toFixed(2)}%</p>
		<div class='card-actions justify-center mt-4'>
			{
				officialBadges.map((badge) => (
					<div class={`badge badge-outline`}>
						{badge.icon} {badge.label}
					</div>
				))
			}
		</div>
	</div>
</a>
